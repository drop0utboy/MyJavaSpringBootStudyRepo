<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>

  <script>
    async function writeBoard() {
      let btitle = document.querySelector("#btitle").value;
      let bcontent = document.querySelector("#bcontent").value;
      let bwriter = document.querySelector("#bwriter").value;
      let battach = document.querySelector("#battach").files[0];

      const board = new FormData();
      board.append("btitle", btitle);
      board.append("bcontent", bcontent);
      board.append("bwriter", bwriter);
      if (battach) {
        board.append("battach", battach);
      }

      console.log("보낼 데이터:", { btitle, bcontent, bwriter, battach });

      try {
        const response = await fetch("http://localhost:8080/db/board-create", {
          method: "post",
          body: board
        });

        const result = await response.json();
        console.log(result);

        // 성공 메시지
        alert("글 등록 성공! 글번호: " + result.bno);

      } catch (error) {
        console.log(error);
        alert("에러 발생: " + error.message);
      };
    }
  </script>
</head>

<body class="bg-light">
  <div class="container my-5">
    <div class="row justify-content-center">
      <div class="col-lg-6 col-md-8">
        <div class="card shadow-lg border-0 rounded-4">
          <div class="card-header bg-info text-white rounded-top-4">
            <h5 class="mb-0">게시글 작성</h5>
          </div>
          <div class="card-body p-4">
            <form id="writeForm" name="writeForm" novalidate>
              <!-- 제목 -->
              <div class="mb-3">
                <label for="btitle" class="form-label">제목</label>
                <input type="text" class="form-control" id="btitle" value="제목1" />
              </div>

              <!-- 내용 -->
              <div class="mb-3">
                <label for="bcontent" class="form-label">내용</label>
                <textarea class="form-control" id="bcontent" rows="4">내용1</textarea>
              </div>

              <!-- 글쓴이 -->
              <div class="mb-3">
                <label for="bwriter" class="form-label">글쓴이</label>
                <input type="text" class="form-control" id="bwriter" value="user1" />
              </div>

              <!-- 파일 -->
              <div class="mb-4">
                <label for="battach" class="form-label">파일 첨부</label>
                <input type="file" class="form-control" id="battach" />
              </div>

              <!-- 버튼 -->
              <div class="d-grid">
                <button type="button" class="btn btn-info btn-lg text-white fw-bold" onclick="writeBoard()">✍ 글쓰기</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>

</html>
