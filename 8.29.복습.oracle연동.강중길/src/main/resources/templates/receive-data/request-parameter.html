<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet"
		crossorigin="anonymous">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"
		crossorigin="anonymous"></script>
	<link href="/css/my.css" rel="stylesheet">
</head>

<body>

	<img src="/image/yana.jpg" height="500" />

	<div class="m-2">
		<img src="/image/yana.jpg" height="500" />
	</div>


	<div class="card m-2">
		<div class="card-header">

			request-parameter 요청 변수
		</div>
		<div class="card-body">
			<div><a href="/receive-data-rest/path-variable1/5">URL에 값 1개를 전송</a></div>
			<br />
			<a href="/receive-data-rest/path-variable2/freeboard/5">URL에 값 2개를 전송</a>


			<hr />

			<button onclick="ajax1()" class="btn btn-warning btn-sm">url에 값 1개를 전송</button>
			<button onclick="ajax2()" class="mybtn mybtn-info mybtn-sm">url에 값 2개를 전송</button>

			<hr />

			<button onclick="ajax2()" class="mybtn mybtn-info mybtn-sm">json test</button>
			<button onclick="ajax4()" class="mybtn mybtn-info mybtn-sm">post json</button>
		</div>

		<script>
			/* async function ajax1() {
				const response = await fetch("/receive-data-rest/request-parameter", {
					method: "POST",
					headers: {
						"Content-Type": "application/x-www-form-urlencoded"
					},
					body: "mid=red&mname=hong&mpassword=12345"
				});

				const json = await response.text();
				console.log(json);
			} */

			async function ajax1() {
				const response = await fetch("/receive-data-rest/request-parameter", {
					method: "POST",

					body: new URLSearchParams({
						mid: "red",
						mname: "홍",
						mpassword: "12345"
					})
				});


				const json = await response.text();
				console.log(json);
			}

			async function ajax2() {
				const member = {
					mid: "red",
					mname: "홍",
					mpassword: "12345"
				};

				const response = await fetch("/receive-data-rest/json", {
					method: "POST",
					headers: {
						"Content-Type": "application/json"
					},
					body: JSON.stringify(member)
				});

				const json = await response.text();
				console.log(json);
			}

			async function ajax3() {
				const response = await fetch("/receive-data-rest/request-parameter2", {
					method: "POST",

					body: new URLSearchParams({
						mid: "red",
						mname: "홍",
						mpassword: "12345"
					})
				});


				const json = await response.text();
				console.log(json);
			}

			async function ajax4() {
				// 이건 json 아님! 자바스크립트 객체임
				const obj = {mid: "red", mname: "홍길동", mpassword: "12345"};
				console.log(obj);

				const json = JSON.stringify(obj);
				console.log(json);

				const obj2 = JSON.parse(json);
				console.log(obj2);
			}
		</script>

</body>

</html>